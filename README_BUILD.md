#!/bin/bash

# =============================================================================
# iOS应用构建工具集使用说明
# 项目: 马夫 (生活记录应用)
# =============================================================================

echo "=========================================="
echo "📱 iOS应用构建工具集"
echo "项目: 马夫 (生活记录应用)"
echo "=========================================="
echo ""

echo "🔧 可用脚本:"
echo ""
echo "1. setup_config.sh     - 配置管理脚本"
echo "   用途: 创建和管理构建配置"
echo "   用法: ./setup_config.sh --create-config"
echo ""
echo "2. quick_build.sh       - 一键构建上传脚本"
echo "   用途: 快速构建并上传到TestFlight"
echo "   用法: ./quick_build.sh"
echo ""
echo "3. build_and_upload.sh  - 完整构建脚本"
echo "   用途: 功能完整的构建脚本，支持多种选项"
echo "   用法: ./build_and_upload.sh [选项]"
echo ""
echo "4. upload_to_testflight.sh - 仅上传脚本"
echo "   用途: 上传已构建的IPA到TestFlight"
echo "   用法: ./upload_to_testflight.sh [选项]"
echo ""

echo "🚀 快速开始:"
echo ""
echo "步骤1: 设置权限"
echo "   chmod +x *.sh"
echo ""
echo "步骤2: 创建配置文件"
echo "   ./setup_config.sh --create-config"
echo ""
echo "步骤3: 编辑配置文件"
echo "   编辑 build_config.sh 文件，填入您的Apple Developer信息"
echo ""
echo "步骤4: 一键构建上传"
echo "   ./quick_build.sh"
echo ""

echo "📋 详细使用说明:"
echo ""
echo "🔧 配置管理 (setup_config.sh):"
echo "   --create-config    创建配置文件"
echo "   --validate-config  验证配置"
echo "   --show-config      显示当前配置"
echo ""

echo "⚡ 快速构建 (quick_build.sh):"
echo "   最简单的使用方式，修改脚本中的配置后直接运行"
echo "   适合日常开发和测试"
echo ""

echo "🛠️ 完整构建 (build_and_upload.sh):"
echo "   -v, --version VERSION   指定版本号"
echo "   -b, --build BUILD       指定构建号"
echo "   -t, --team TEAM_ID      指定Team ID"
echo "   -a, --apple-id ID       指定Apple ID"
echo "   -p, --password PASS     指定App专用密码"
echo "   --verbose               详细输出"
echo "   --clean-only            仅清理构建目录"
echo "   --build-only            仅构建，不上传"
echo ""

echo "📤 仅上传 (upload_to_testflight.sh):"
echo "   -f, --file IPA_PATH     指定IPA文件路径"
echo "   -a, --apple-id ID       指定Apple ID"
echo "   -p, --password PASS     指定App专用密码"
echo ""

echo "📝 注意事项:"
echo ""
echo "1. 首次使用前需要配置Apple Developer信息:"
echo "   - Team ID: 在Apple Developer网站获取"
echo "   - Apple ID: 您的开发者账号邮箱"
echo "   - App专用密码: 在Apple ID设置中生成"
echo ""
echo "2. 确保已安装Xcode和命令行工具"
echo ""
echo "3. 确保项目已正确配置代码签名"
echo ""
echo "4. 构建过程中会生成日志文件 build_log.txt"
echo ""

echo "🔍 故障排除:"
echo ""
echo "问题1: 权限错误"
echo "解决: chmod +x *.sh"
echo ""
echo "问题2: Apple ID认证失败"
echo "解决: 检查Apple ID和App专用密码是否正确"
echo ""
echo "问题3: 代码签名错误"
echo "解决: 检查Team ID和证书配置"
echo ""
echo "问题4: 构建失败"
echo "解决: 查看 build_log.txt 文件获取详细错误信息"
echo ""

echo "📞 获取帮助:"
echo "   运行任何脚本时使用 -h 或 --help 参数查看详细帮助"
echo ""

echo "=========================================="
echo "🎉 开始使用iOS应用构建工具集!"
echo "=========================================="
